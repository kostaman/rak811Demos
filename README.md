# rak811Demos
## Introduction
This repository contains simple examples on how to program the STM32L151CB-A processor implemented on the Rak811 chip. This chip 
contains the processor and an SX1276 LoRa transceiver.
The programs use peripherals either implemented on the processor chip itself or on the Rak811 Tracker board. All programs have been developed with STM32CubeMX which generates the peripheral initialization code. This code is included into Eclipse with the Ac6STM32 plugin. STM32CubeMX generated code for the ST HAL (Hardware Abstraction Layer) library whose functions are subsequently used in the programs. Once the program has been successfully built it is flashed into the Rak811 processor using an ST-Link V2 debugging probe. In circuit debugging is accomplished using this probe with the help of openocd and gdb. All this can be done from within the Eclipse IDE.
## The Blink Demo (Rak811Blink)
The Rak811 tracker board has 2 user programmable LEDs connected to the GPIO port PA12 (LED1) and PB4 (LED2) The Blink program uses a 2 bit binary counter to drive those LEDs. The HAL_Delay function determines the frequency of blinking.
## The Timer Demo (Rak811Timer)
This program also uses the LEDs on te tracker board but here the blinking frequency is determined by 2 hardware timers. When the first timer expires it triggers an interrupt at a frequency of 1 Hz. In the callback routine associated with this interrupt the state of the first LED is toggled and the second LED switched on. Then a second 200 ms timer is started and the interrupt generated by this timer will switch the second LED off again.
## The UART or a Hello World program (Rak811HelloWorld)
The Hello World program in the world of embedded systems is the blinking LED. It is already quite a bit more difficult to write the traditional Hello World program because there usually a UART or an Internet connection is needed. The Rak811 tracker connects its UART1 to the USB connector which is seen on the Linux PC as /dev/ttyUSB0. When connecting /dev/ttyUSB0  with a serial Terminal emulator like minicom you can see the text sent to the UART on the Rak811 tracker board. The program also demonstrates how to redirect printf calls to the UART. For this the file syscalls.c from STM32CubeMX is copied into the project and a new file uart_io.c is added which does the actual re-direction implementing \_]_io_putchar \_\_io_getchar.  
